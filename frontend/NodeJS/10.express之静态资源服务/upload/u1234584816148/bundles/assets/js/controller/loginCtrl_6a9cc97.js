define("bundles/assets/js/controller/loginCtrl",["bundles/assets/js/app","bundles/plugins/validator/validator.min","bundles/plugins/slider-captcha/slidercaptcha.min","bundles/assets/js/service/fromWatchService","bundles/assets/js/service/authorizationService","bundles/assets/js/service/securityService","bundles/assets/js/controller/baseCtrl"],function(e,s,t){return require("bundles/assets/js/service/fromWatchService"),require("bundles/assets/js/service/authorizationService"),require("bundles/assets/js/service/securityService"),require("bundles/assets/js/controller/baseCtrl"),e.controller("loginCtrl",["$scope","$controller","$state","$stateParams","$window","fromWatchService","authorizationService","initData","base64SecurityService",function(e,a,i,r,n,c,l,o){function u(){e.oauth_callback=r.oauth_callback,l.isAuthenticated()&&l.verify_token().then(function(){if(e.oauth_callback){var s=l.authenticationData.ticket,t=e.oauth_callback;t+=t.indexOf("?")>=0?"&ticket="+s:"?ticket="+s,n.location.href=t}else i.go("/")},function(){l.logOut(e.oauth_callback)})}function d(e,t){switch(e){case"username":if(s.isEmpty(t))return"请输入帐户名";case"password":if(s.isEmpty(t))return"请输入密码";default:return null}return null}angular.extend(this,a("baseCtrl",{$scope:e})),u();var f=new t({id:"slidercaptcha",success_callback:function(){e.$apply(function(){e.disableState=!0})}});e.form=o,e.login=function(){e.loginLoading=!0,c.formvalidate(e,e.form,d)&&f.success()?l.login(e.form).then(function(){u()},function(s){e.errormsg=s.msg,e.loginLoading=!1}):e.loginLoading=!1},c.startwatch(e,"form",d)}])});